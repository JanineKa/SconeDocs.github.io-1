<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>manual scone host - SCONE</title>
  

  <link rel="shortcut icon" href="../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "manual scone host";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script> 

  
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-103149717-2', 'sconedocs.github.io');
      ga('send', 'pageview');
  </script>
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> SCONE</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="..">Introduction</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../outline/">Getting Started</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../appsecurity/">Application-oriented security</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../background/">SCONE Background</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../SCONE_CLI/">SCONE CLI</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../SCONE_HOST_SETUP/">SCONE Host Setup</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../SCONE_toolchain/">SCONE SGX toolchain</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../SCONE_Curated_Images/">SCONE Curated Images</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../SCONE_TUTORIAL/">SCONE Tutorial</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../SCONE_GENERATE_IMAGE/">SCONE Create Image</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../SCONE_Dockerfile/">SCONE Dockerfile</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../SCONE_Swarm_Example/">SCONE Swarm Example</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../SCONE_Compose/">SCONE Compose</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../SCONE_EE2EE/">Example E2E encryption</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../C/">C</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../C++/">C++</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Fortran/">Fortran</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../GO/">GO</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Python/">Python</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Rust/">Rust</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 current">
        <a class="current" href="./">manual scone host</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#scone-host">scone host</a></li>
                
                    <li><a class="toctree-l4" href="#commands">Commands</a></li>
                
            
            </ul>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../SCONE_SERVICE/">manual scone service</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../SCONE_STACK/">manual scone stack</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../SCONE_SWARM/">manual scone swarm</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../SCONE_VOLUME/">manual scone volume</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../SCONE_Fileshield/">manual scone fspf</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../SCONE_ENV/">Environment variables</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../SCONE_Publications/">Publications</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../glossary/">Glossary</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../aboutScone/">About Scone</a>
        
    </li>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">SCONE</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>manual scone host</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="scone-host">scone host</h1>
<p>This page describes the CLI <strong>scone host</strong> in more details. For an more general introduction on how to install a host and how to set up ssh to this host, please read section <a href="../SCONE_HOST_SETUP/">SCONE Host Setup</a>. Read section <a href="../SCONE_CLI/">SCONE Command Line Interface</a> to see how to install command <strong>scone</strong>.</p>
<h2 id="commands">Commands</h2>
<p><strong>scone host</strong> supports the following commands:</p>
<ul>
<li>
<p><strong>check</strong>:     checks that host is properly installed (patched docker engine and patched sgx driver)</p>
</li>
<li>
<p><strong>install</strong>:   installs the patched SGX driver and patched docker engine</p>
</li>
<li>
<p><strong>reboot</strong>:    reboots a host</p>
</li>
<li>
<p><strong>uninstall</strong>: uninstalls SGX driver and patched docker engine</p>
</li>
<li>
<p><strong>swarm</strong>:    join a new or another swarm</p>
</li>
</ul>
<h3 id="scone-host-install">scone host install</h3>
<p>Command <strong>install</strong> installs a patched docker engine and a patched Intel SGX driver. It also supports that the installed host joins an existing Docker swarm or it becomes the manager of a newly created Docker swarm.</p>
<p><strong>NOTE: if a docker engine or an Intel SGX driver is already installed, the installed software is uninstalled and replaced by a patched versions. In this process, all containers that run on this machine and all enclaves that execute on this host are removed. Use command install with care.</strong> </p>
<h4 id="options">Options</h4>
<ul>
<li>You must always specify option <strong>--name HOST</strong>, where, <strong>HOST</strong> is the name of the host that you want to install. You need to have <a href="../SCONE_HOST_SETUP/">ssh access</a> to this host - without the need to type in a password.
<br/>
<br/>
<strong>Example:</strong> To install host <strong>dorothy</strong> without joining any swarm, just execute</li>
</ul>
<pre><code class="bash">$ scone host install --name dorothy 
</code></pre>

<ul>
<li>If you want to install a host and make this host a manager of a new or an existing swarm, you need to add option <strong>--as-manager</strong>.
<br/>
<br/>
<strong>Example:</strong> To install host <strong>faye</strong> and create a new swarm with <strong>faye</strong> as a manager, just execute</li>
</ul>
<pre><code class="bash">$ scone host install --name faye --as-manager
</code></pre>

<p>You can now check your swarm with <a href="../SCONE_SWARM/">scone swarm</a> to see the members of your new swarm:</p>
<pre><code class="bash">$ scone swarm ls --manager faye
NODENO        SGX VERSION   DOCKER-ENGINE SGX-DRIVER    HOST                 STATUS     AVAILABILITY  MANAGER   
1             1             SCONE         SCONE         faye                 Ready      Active        Leader    
</code></pre>

<ul>
<li>If you want to join an existing swarm as <strong>a worker</strong>, you have to specify option <strong>--join MANAGER</strong>
<br/>
<br/>
<strong>Example:</strong> To install host <strong>edna</strong> and then join the swarm managed by manager <strong>faye</strong>, execute:</li>
</ul>
<pre><code class="bash">$ scone host install --name edna --join faye
</code></pre>

<p>You can now check your swarm with <a href="../SCONE_SWARM/">scone swarm</a> to see the members of your new swarm:</p>
<pre><code class="bash">$ scone swarm ls --manager faye`
NODENO        SGX VERSION   DOCKER-ENGINE SGX-DRIVER    HOST                 STATUS     AVAILABILITY  MANAGER   
1             1             SCONE         SCONE         edna                 Ready      Active                  
2             1             SCONE         SCONE         faye                 Ready      Active        Leader    
</code></pre>

<ul>
<li>If you want to join an existing swarm as <strong>a manager</strong>, you have to specify options <strong>--join MANAGER --as-manager</strong>
<br/>
<br/>
<strong>Example:</strong> To install host <strong>edna</strong> and then join the swarm managed by manager <strong>faye</strong> as a manager, execute:</li>
</ul>
<pre><code class="bash">$ scone host install --name edna --join faye --as-manager
</code></pre>

<h3 id="scone-host-swarm">scone host swarm</h3>
<p>In the above example, we installed host <strong>dorothy</strong> without joining any swarm. Sometimes one wants to revise this decision via command <strong>swarm</strong>. You can add an existing node to another swarm or you can as a node to become a manager of an existing or a new node. You need to set the options <strong>--join MANAGER</strong> and <strong>--as-manager</strong> as described for <strong>scone host install</strong>.</p>
<p><strong>Example:</strong> To add host <strong>dorothy</strong> to the swarm managed by host <strong>faye</strong>, just execute:</p>
<pre><code class="bash">$ scone host swarm --name dorothy --join faye 
</code></pre>

<p><strong>Example:</strong> To add host <strong>dorothy</strong> to the swarm managed by host <strong>faye</strong> as a manager, just execute:</p>
<pre><code class="bash">$ scone host swarm --name dorothy --join faye --as-manager
</code></pre>

<h3 id="scone-host-check">scone host check</h3>
<p>To check if a host is properly installed, you can use command <strong>check</strong>.</p>
<p><strong>Example:</strong> To check if host <strong>faye</strong> is properly installed, just execute:</p>
<pre><code class="bash">$ scone host check --name faye
</code></pre>

<p>If the host is not properly installed, warnings or errors are issued. Typically, you can fix errors and warnings be reinstalling the host.</p>
<h3 id="scone-host-reboot">scone host reboot</h3>
<p>Sometimes, the installation of an host fails because the existing SGX driver cannot be removed. Most of the time, the issue is an enclave that currently uses the SGX driver. You can find these processes, for example, with Linux utility <strong>lsof</strong>:</p>
<pre><code class="bash">$ sudo lsof | grep dev/isgx 
</code></pre>

<p>Sometimes removing an existing Intel SGX driver fails, despite the fact that no process seems to use the driver. In case this happens, one last resort is to reboot the machine. You issue the reboot manually or you can perform this with <strong>scone host reboot</strong>. </p>
<p>You must specify options <strong>--name HOST</strong> to indicate which host to reboot. Moreover,   <strong>scone host reboot</strong> will exit with an error unless you specify option <strong>--force</strong>.</p>
<p><strong>Example:</strong> To reboot host dorothy, just execute the following:</p>
<pre><code class="bash">$ scone host reboot --name  dorothy --force 
</code></pre>

<p>If you want to wait until the host is again available, you can specify option <strong>--wait</strong>.</p>
<p><strong>Example:</strong> To reboot host dorothy and only return after the host has indeed rebooted, just execute the following:</p>
<pre><code class="bash">$ scone host reboot --name  dorothy --force --wait
</code></pre>

<h3 id="scone-host-uninstall">scone host uninstall</h3>
<p>With the help of <strong>scone host uninstall</strong> you can force an host to </p>
<ul>
<li>
<p>leave any Docker swarm it might be part of </p>
</li>
<li>
<p>uninstall the patched Docker engine</p>
</li>
<li>
<p>uninstall the patched SGX driver</p>
</li>
</ul>
<p><strong>NOTE: all containers that might run on this host, will be destroyed.</strong></p>
<h4 id="options_1">Options</h4>
<ul>
<li>
<p>You must define the name of the host to be uninstalled via option <strong>--name HOST</strong>. </p>
</li>
<li>
<p>You must always give the <strong>--force</strong> option, otherwise, an error is issued.</p>
</li>
<li>
<p>If a node is part of a swarm, you must explicitly specify the option <strong>--manager MANAGERHOST</strong>. </p>
</li>
<li>
<p>If the node is not part of a swarm, you must specify the option <strong>--noswarm</strong>. </p>
</li>
</ul>
<p><strong>Note:</strong> While other objects / commands support the use of environment variable <strong>SCONE_MANAGER</strong>
as an implicit definition of <strong>--manager $SCONE_MANAGER</strong>, we decided that users must explicitly specify the manager of the swarm for command <strong>uninstall</strong>.</p>
<p><strong>Example:</strong> To uninstall a host <strong>edna</strong> that is part of a swarm managed by host <strong>faye</strong>, execute:</p>
<pre><code class="bash">$ scone host uninstall --name  edna --force --manager faye
</code></pre>

<p><strong>Example:</strong> Let's assume that host <strong>edna</strong> is not part of a swarm. To uninstall host <strong>edna</strong>, execute:</p>
<pre><code class="bash">$ scone host uninstall --name  edna --force --noswarm
</code></pre>

<h3 id="general-options">General options</h3>
<ul>
<li>
<p><strong>--help</strong> (or, <strong>-h</strong>): issue help message for object <strong>host</strong>. If a command is specified, it issues a help message specific to this command.</p>
</li>
<li>
<p><strong>--debug</strong> (or, <strong>-x</strong>): display all commands that are executed by <strong>scone host</strong>. This can be helpful in case a command fails. When you submit a support request regarding a failed command, please send a copy of the output of the failing command with <strong>--debug</strong> set.</p>
</li>
<li>
<p><strong>--verbose</strong> (or, <strong>-v</strong>): display all commands that are executed by <strong>scone host</strong>. This can be helpful in case commands fail. When you submit a support request regarding a failed command, please send a copy of the log of the output that includes </p>
</li>
</ul>
<p>&copy; <a href="http://www.scontain.com">scontain.com</a>, December 2017. <a href="mailto:info@scontain.com">Questions or Suggestions?</a></p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../SCONE_SERVICE/" class="btn btn-neutral float-right" title="manual scone service"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../Rust/" class="btn btn-neutral" title="Rust"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../Rust/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../SCONE_SERVICE/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
