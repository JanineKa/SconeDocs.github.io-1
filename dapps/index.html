



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Scone Documentation - Secure Containers">
      
      
        <link rel="canonical" href="https://sconedocs.github.io/dapps/">
      
      
        <meta name="author" content="Christof Fetzer">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.0.6">
    
    
      
        <title>Trusted DApps - SCONE</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.451f80e5.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.22915126.css">
      
      
        
        
        <meta name="theme-color" content="#3f51b5">
      
    
    
      <script src="../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#trusted-dapps-with-scone-and-iexec" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://sconedocs.github.io" title="SCONE" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                SCONE
              </span>
              <span class="md-header-nav__topic">
                Trusted DApps
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://sconedocs.github.io" title="SCONE" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    SCONE
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      Tutorial
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Tutorial
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../outline/" title="Getting Started" class="md-nav__link">
      Getting Started
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../firstcontainer/" title="Simulation Mode" class="md-nav__link">
      Simulation Mode
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../hardwaremode/" title="Hardware Mode" class="md-nav__link">
      Hardware Mode
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../hostexample/" title="Host Execution" class="md-nav__link">
      Host Execution
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../dockerfileexample/" title="Dockerfile Example" class="md-nav__link">
      Dockerfile Example
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../groupcacheUseCase/" title="GO example" class="md-nav__link">
      GO example
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../multistagebuild/" title="Multi-stage build" class="md-nav__link">
      Multi-stage build
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../memory_dump/" title="Finding Secrets" class="md-nav__link">
      Finding Secrets
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Trusted DApps
      </label>
    
    <a href="./" title="Trusted DApps" class="md-nav__link md-nav__link--active">
      Trusted DApps
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#trusted-dapp" title="Trusted DApp" class="md-nav__link">
    Trusted DApp
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scone-platform" title="SCONE Platform" class="md-nav__link">
    SCONE Platform
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#trusted-copy-dapp" title="Trusted copy DApp" class="md-nav__link">
    Trusted copy DApp
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#encrypted-volumes" title="Encrypted Volumes" class="md-nav__link">
    Encrypted Volumes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#key-and-tag-management" title="Key and Tag Management" class="md-nav__link">
    Key and Tag Management
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#attesting-cas" title="Attesting CAS" class="md-nav__link">
    Attesting CAS
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sessions" title="Sessions" class="md-nav__link">
    Sessions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#building-an-dapp" title="Building an DApp" class="md-nav__link">
    Building an DApp
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing" title="Testing" class="md-nav__link">
    Testing
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setup" title="SETUP" class="md-nav__link">
    SETUP
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-1" title="Step 1" class="md-nav__link">
    Step 1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2" title="Step 2" class="md-nav__link">
    Step 2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3" title="Step 3" class="md-nav__link">
    Step 3
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Use Cases
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Use Cases
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../usecases/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../pyspark/" title="PySpark" class="md-nav__link">
      PySpark
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tensorflowlite/" title="TensorFlow Lite" class="md-nav__link">
      TensorFlow Lite
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Installation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Installation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../installation/" title="Installation overview" class="md-nav__link">
      Installation overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../dockerinstall/" title="Installing docker" class="md-nav__link">
      Installing docker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sgxinstall/" title="Installing Intel SGX driver" class="md-nav__link">
      Installing Intel SGX driver
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sconeinstall/" title="Installing SCONE" class="md-nav__link">
      Installing SCONE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../microcode/" title="Updating CPU microcode" class="md-nav__link">
      Updating CPU microcode
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Language Support
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Language Support
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../C/" title="C" class="md-nav__link">
      C
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../C++/" title="C++" class="md-nav__link">
      C++
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Fortran/" title="Fortran" class="md-nav__link">
      Fortran
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../GO/" title="GO" class="md-nav__link">
      GO
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Java/" title="Java" class="md-nav__link">
      Java
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Python/" title="Python" class="md-nav__link">
      Python
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../pypyscone/" title="PyPy" class="md-nav__link">
      PyPy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Nodejs/" title="Node" class="md-nav__link">
      Node
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../R/" title="R" class="md-nav__link">
      R
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Rust/" title="Rust" class="md-nav__link">
      Rust
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Command Line Interface
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Command Line Interface
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../SCONE_CLI/" title="SCONE CLI" class="md-nav__link">
      SCONE CLI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../SCONE_HOST_SETUP/" title="SCONE Host Setup" class="md-nav__link">
      SCONE Host Setup
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../SCONE_toolchain/" title="SCONE SGX toolchain" class="md-nav__link">
      SCONE SGX toolchain
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../SCONE_Curated_Images/" title="SCONE Curated Images" class="md-nav__link">
      SCONE Curated Images
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../SCONE_TUTORIAL/" title="SCONE Hello World" class="md-nav__link">
      SCONE Hello World
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../SCONE_GENERATE_IMAGE/" title="SCONE Create Image" class="md-nav__link">
      SCONE Create Image
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../SCONE_Dockerfile/" title="SCONE Dockerfile" class="md-nav__link">
      SCONE Dockerfile
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../SCONE_Swarm_Example/" title="SCONE Swarm Example" class="md-nav__link">
      SCONE Swarm Example
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../SCONE_Compose/" title="SCONE Compose" class="md-nav__link">
      SCONE Compose
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../SCONE_CAS/" title="SCONE CAS" class="md-nav__link">
      SCONE CAS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../SCONE_EE2EE/" title="Example E2E encryption" class="md-nav__link">
      Example E2E encryption
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Manuals
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Manuals
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../SCONE_HOST/" title="scone host" class="md-nav__link">
      scone host
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../SCONE_SERVICE/" title="scone service" class="md-nav__link">
      scone service
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../SCONE_STACK/" title="scone stack" class="md-nav__link">
      scone stack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../SCONE_SWARM/" title="scone swarm" class="md-nav__link">
      scone swarm
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../SCONE_Fileshield/" title="scone fspf" class="md-nav__link">
      scone fspf
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ssh/" title="ssh setup" class="md-nav__link">
      ssh setup
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../SCONE_ENV/" title="environment variables" class="md-nav__link">
      environment variables
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../MrEnclave/" title="MrEnclave" class="md-nav__link">
      MrEnclave
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../performance/" title="Performance" class="md-nav__link">
      Performance
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Background
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Background
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../appsecurity/" title="Application-Oriented Security" class="md-nav__link">
      Application-Oriented Security
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../background/" title="SCONE Background" class="md-nav__link">
      SCONE Background
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../glossary/" title="Glossary" class="md-nav__link">
      Glossary
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../SCONE_Publications/" title="Publications" class="md-nav__link">
      Publications
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../aboutScone/" title="About" class="md-nav__link">
      About
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../faq/" title="FAQ" class="md-nav__link">
      FAQ
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#trusted-dapp" title="Trusted DApp" class="md-nav__link">
    Trusted DApp
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scone-platform" title="SCONE Platform" class="md-nav__link">
    SCONE Platform
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#trusted-copy-dapp" title="Trusted copy DApp" class="md-nav__link">
    Trusted copy DApp
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#encrypted-volumes" title="Encrypted Volumes" class="md-nav__link">
    Encrypted Volumes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#key-and-tag-management" title="Key and Tag Management" class="md-nav__link">
    Key and Tag Management
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#attesting-cas" title="Attesting CAS" class="md-nav__link">
    Attesting CAS
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sessions" title="Sessions" class="md-nav__link">
    Sessions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#building-an-dapp" title="Building an DApp" class="md-nav__link">
    Building an DApp
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing" title="Testing" class="md-nav__link">
    Testing
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setup" title="SETUP" class="md-nav__link">
    SETUP
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-1" title="Step 1" class="md-nav__link">
    Step 1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2" title="Step 2" class="md-nav__link">
    Step 2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3" title="Step 3" class="md-nav__link">
    Step 3
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="trusted-dapps-with-scone-and-iexec">Trusted DApps with SCONE and iExec<a class="headerlink" href="#trusted-dapps-with-scone-and-iexec" title="Permanent link">&para;</a></h1>
<p>This tutorial shows how to build a <strong>trusted DApp</strong> for the <a href="https://iex.ec/"><strong>iExec platform</strong></a>. A <a href="https://en.wikipedia.org/wiki/Decentralized_application"><strong>DApp</strong></a> is a decentralized application that can be executed on hosts of a decentralized network. We recommend that you read the preceding tutorial pages first to learn about basic terminology and concepts of SCONE. </p>
<h3 id="trusted-dapp">Trusted DApp<a class="headerlink" href="#trusted-dapp" title="Permanent link">&para;</a></h3>
<p>SCONE helps developers to protect the <strong>integrity</strong> as well as the <strong>confidentiality</strong> not only of data at rest (i.e., on disk) and data being transmitted but also <strong>all data stored in main memory</strong>. Note
that any root user can easily dump the main memory of any application and in this
way can gain secrets like the keys used to encrypt the data at rest.  </p>
<p><img alt="Protection Goals" src="../img/DApp-overview.png" /></p>
<p>By <strong>trusted DApp</strong> we refer to a DApp that executes inside a <a href="https://en.wikipedia.org/wiki/Trusted_execution_environment"><strong>trusted execution environment (TEE)</strong></a> in
such a way that not even an attacker with root rights can access the data of the application. SCONE simplifies to run applications inside of TEEs as well as to
transparently encrypt and decrypt files.
SCONE is designed to be independent of the actual TEE implementation. Right now -- since there is a lack of appropriate hardware alternatives -- SCONE supports only <a href="https://en.wikipedia.org/wiki/Software_Guard_Extensions">Intel SGX</a>.</p>
<h3 id="scone-platform">SCONE Platform<a class="headerlink" href="#scone-platform" title="Permanent link">&para;</a></h3>
<p>The SCONE platform helps to run DApps inside of TEEs without source code modifications. In this tutorial, we</p>
<ul>
<li>
<p>describe how to build a simple application to run with SCONE inside of an <strong>enclave</strong>, i.e., inside an Intel SGX TEE,</p>
</li>
<li>
<p>show how to compile the simple trusted DApp with the help of an Alpine container,</p>
</li>
<li>
<p>how to deploy and execute inside of an Alpine container,</p>
</li>
<li>
<p>introduce the workflow of where and how data is encrypted, pushed to the application and then decrypted</p>
</li>
<li>
<p>explain how keys are managed and passed to a trusted DApp, and</p>
</li>
<li>
<p>show how to test this application on your own infrastructure.</p>
</li>
</ul>
<h3 id="trusted-copy-dapp">Trusted <strong>copy</strong> DApp<a class="headerlink" href="#trusted-copy-dapp" title="Permanent link">&para;</a></h3>
<p>We show how to implement a simple <strong>copy</strong> command as
a trusted DApp. This is of course not a realistic DApp but it helps to show all
steps necessary to build and run such an application.</p>
<p>The <strong>copy</strong> DApp copies files located in an input directory <strong>/INPUTS</strong> to an output directory <strong>/OUTPUTS</strong> of the client the machine.</p>
<p><img alt="**copy DApps**" src="../img/simpledapp.png" /></p>
<p>With the help of SCONE, this <strong>copy</strong> DApp actually copies
encrypted files such that the SCONE <strong>transparently decrypts</strong> and checks the integrity of files that are read by the application. This protects the confidentiality and integrity of the files without any need to change the application itself. Also, SCONE encrypts and integrity protects the files that are written by the application. Each file is encrypted with a random key generated and managed by SCONE inside the enclave.</p>
<p><img alt="**copy DApps**" src="../img/copydapp.png" /></p>
<p>With the help of a CLI (command line interface deployed in a container), a client can encrypt
and push files stored on its client machine  to the copy DApp. The copy DApp copies the files. The CLI can decrypt the files after the execution of the DApp.</p>
<p><img alt="**workflow DApps**" src="../img/workflow.png" /></p>
<p>We introduce the commands to perform this example below.</p>
<h2 id="encrypted-volumes">Encrypted Volumes<a class="headerlink" href="#encrypted-volumes" title="Permanent link">&para;</a></h2>
<p>Containers support <strong>volumes</strong> as a way to persist data. Trusted DApps for the iExec platform have always two <strong>encrypted volumes</strong> mapped into their file system:</p>
<ul>
<li>an encrypted volume for input files mapped in the container in directory <strong>/encryptedInputs</strong>, and</li>
<li>an encrypted volume for output files <strong>/encryptedOutputs</strong>.</li>
</ul>
<p>We show below how the input files are encrypted with the help of the CLI and pushed to the container. Moreover, we show how to decrypt the files with the help of CLI.</p>
<p><img alt="**keys and tags**" src="../img/keysandtags.png" /></p>
<p>To access an encrypted volume, one needs a <strong>key</strong> and a <strong>tag</strong>. The <strong>key</strong> is used the encrypt the individual keys of the files of the volume, i.e., it is used to protect the <strong>confidentiality</strong> of the files. The tag describes the current state of the volume. Any change of any file in the volume will result in a new <strong>tag</strong>. The <strong>tag</strong> is used to protect the <strong>integrity</strong> and <strong>freshness</strong> of the files:</p>
<ul>
<li>any unauthorized modification of the volume will be detected since the correct tag can only be computed by parties knowing the key of the volume (<strong>integrity protection</strong>).</li>
<li>any rollback to older version of the volume will be correctly encrypted but will have an old tag. Hence, rollbacks to older versions will be detected (<strong>freshness protection</strong>).</li>
</ul>
<h2 id="key-and-tag-management">Key and Tag Management<a class="headerlink" href="#key-and-tag-management" title="Permanent link">&para;</a></h2>
<p>The <strong>copy DApp</strong> requires access to <strong>keys</strong> and <strong>tags</strong>  to read the encrypted input files (i.e., the input volume) and to write the encrypted output files (i.e., the output volume). Passing the keys and tags to the <strong>copy DApp</strong> is non-trivial since we need to ensure that no other DApp or an attacker can read or modify  the keys or the tags.  </p>
<p><img alt="**Keymanagement**" src="../img/keymanagement.png" /></p>
<p>To pass the keys and tags to a trusted DApp, SCONE provides a <strong>configuration and attestation service (CAS)</strong>. The CAS can ensure that only the <strong>copy DApp</strong> can access the keys and tags by verifying that it talks to an unmodified <strong>copy DApp</strong>. This process is called <strong>attestation</strong> and is performed with the help of the
Intel SGX CPU extension.</p>
<p>Typically, such a trusted DApp is deployed with the help of a container image hosted on docker hub (or some similar repository). We recommend that these container images are signed using <a href="https://docs.docker.com/engine/security/trust/content_trust/">Docker content trust</a>. Note that content trust is not sufficient to ensure that we talk to an unmodified <strong>copy DApp</strong> since 1) an attacker with root access could change this image on the host on which it is deployed, and 2) the <strong>copy DApp</strong> could not <a href="https://en.wikipedia.org/wiki/Authentication">authenticate</a> itself  since it would need a private key of a certificate and  this private key could be read by any entity that is permitted to access that image. Hence, if we were to use only content trust, an attacker could easily impersonate the <strong>copy DApp</strong>.</p>
<p><img alt="**Trusted DApp State**" src="../img/DAppState.png" /></p>
<p>To <strong>attest</strong> a trusted DApp, we need to describe the state of this DApp. In general, this consists of a hash value that describes the trusted DApp (called <strong>MrEnclave</strong>) and a tag that describes the file systems state. In the case of the copy DApp, the file system (mounted at /) does not need to be attested - only the encrypted input volume (mounted at /encryptedInputs)  and encrypted output volume (mounted at /encryptedOutputs) needs to be attested.</p>
<p>When a trusted DApp starts up, it connects to the CAS to perform an attestation. This attestation ensures that <strong>MrEnclave</strong> is the expected value and that the file system and the mounted volumes are in the correct state, i.e., the tags have the expected values.</p>
<p>A trusted DApp will typically write to the output volume. This will change the tag of the output volume. To ensure that a client can read the current state of the volumes written by a trusted DApp, the <strong>tags</strong> will be pushed to the CAS when a trusted DApp exits.</p>
<h2 id="attesting-cas">Attesting CAS<a class="headerlink" href="#attesting-cas" title="Permanent link">&para;</a></h2>
<p>CAS is written in <a href="https://www.rust-lang.org/en-US/">Rust</a>, a safe and efficient programming language. The type-safety ensures that simple programming bugs can be exploited by attackers to hijack services. A client can attest a valid CAS in two ways:</p>
<ul>
<li>via the Intel attestations service, and/or</li>
<li>via the certificates provided by CAS.</li>
</ul>
<p>Right now, the CLI verifies that it talks to a correct CAS with the help of TLS. The client only uses TLS and verifies that the CAS has the correct certificate. Only a CAS will be able to get this certificate. In a later version, we will additionally ensure that the CAS provides a correct report by the Intel attestations service.</p>
<p>CAS is <strong>trusted, managed service</strong>: it can be operated by a provider but the provider is not  able to access the sessions of the clients. Right now we run a public CAS service for debugging and testing. <strong>This CAS runs in debug mode</strong>, i.e., you should not use this CAS to pass secrets.</p>
<p>In case there would be a need for running a private CAS services, we will enable clients to run their own CAS. Please contact us if you want to run your own CAS or if you need access to CAS running in production mode.</p>
<h2 id="sessions">Sessions<a class="headerlink" href="#sessions" title="Permanent link">&para;</a></h2>
<p>We need to specify the value of <strong>MrEnclave</strong> and the state (i.e., the tags) of the of the volumes and in the general case, also the file system. To do so, CAS supports
a security policies.  We call such a security policy a  <strong>session</strong>.</p>
<p><img alt="**Session**" src="../img/session.png" /></p>
<p>A session specifies what volumes are mounted and where they are mounted, the keys and tags of these volumes and MrEnclave of the trusted DApp. For example, a
session (template) could look like this:</p>
<div class="codehilite"><pre><span></span>name: $SESSION
digest: create

services:
   - name: application
     image_name: sconecuratedimages/iexec:copy_demo
     mrenclaves: [e0f45a9a862c83f383730cc2aef144081025e3f925615da5b35c4d980faaa3c9]
     tags: [demo]
     command: /application
     pwd: /
     environment:
        SCONE_MODE: hw
        ZIP_URL: $URL

volumes:
   - name: encrypted-input-files
     fspf_tag: $INPUT_FSPF_TAG
     fspf_key: $INPUT_FSPF_KEY
   - name: encrypted-output-files
     fspf_tag: $OUTPUT_FSPF_TAG
     fspf_key: $OUTPUT_FSPF_KEY

images:
   - name: sconecuratedimages/iexec:copy_demo
     mrenclaves: [e0f45a9a862c83f383730cc2aef144081025e3f925615da5b35c4d980faaa3c9]
     tags: [demo]
     volumes:
        - name: encrypted-input-files
          path: /encryptedInputs
        - name: encrypted-output-files
          path: /encryptedOutputs
</pre></div>

<p>Note that in most cases you can start from a generic session template and you do not need to worry about the syntax and all the details of session descriptions.</p>
<h2 id="building-an-dapp">Building an DApp<a class="headerlink" href="#building-an-dapp" title="Permanent link">&para;</a></h2>
<p>The source code of this application, you can retrieve from</p>
<div class="codehilite"><pre><span></span>git clone https://github.com/scontain/copy_dapp.git
<span class="nb">cd</span> copy_dapp
</pre></div>

<p>You can see that the source code (file <em>copy_files.c</em>) does not contain any specifics related to
SCONE or SGX. </p>
<p>We build this program with the help of the standard
<strong>gcc</strong> that is part of Alpine Linux (see the Dockerfile). For convenience,
we provide an Alpine image (i.e., sconecuratedimages/muslgcc) that has <strong>gcc</strong> preinstalled.</p>
<div class="codehilite"><pre><span></span><span class="k">FROM</span><span class="s"> sconecuratedimages/muslgcc</span>

COPY copy_files.c  /

<span class="c"># compile with vanilla gcc</span>
<span class="k">RUN</span> gcc -Wall copy_files.c -o /copy_files

<span class="k">FROM</span><span class="s"> iexechub/sgx-scone:runtime</span>

COPY --from<span class="o">=</span><span class="m">0</span> /copy_files /application

<span class="k">RUN</span> apk add curl bash unzip zip

<span class="k">ENTRYPOINT</span><span class="s"> [&quot;/application.sh&quot;]</span>
</pre></div>

<p>To run the application inside of an enclave, we need the SCONE
runtime environment. This runtime is part of image <strong>iexechub/sgx-scone:runtime</strong>.
Moreover, this image contains a script <strong>/application.sh</strong> that pulls
the input and output volumes from some transfer service, executes the application inside of an enclave. For testing, the script can push the encrypted output volume to a transfer service (see below).  </p>
<p>The image <strong>sconecuratedimages/iexec:copy_demo</strong>
is built by the script <code class="codehilite">build-image.sh</code>. This script also determines
<strong>MrEnclave</strong> of the application and writes a <strong>session template</strong> copy_dapp.yml.</p>
<h2 id="testing">Testing<a class="headerlink" href="#testing" title="Permanent link">&para;</a></h2>
<p>We now show how to execute a simple test program. After building the image
by executing</p>
<div class="codehilite"><pre><span></span>./build-image.sh
</pre></div>

<p>We can execute this image on a SGX-capable host. This host has to have the SCONE local attestation service and Docker installed. We will describe in the installation section on how to install these prerequisites.</p>
<p>In what follows, we assume that the name of the host is stored in environment variable <strong>host</strong>.</p>
<h3 id="setup">SETUP<a class="headerlink" href="#setup" title="Permanent link">&para;</a></h3>
<p>To execute 
We create an INPUTS directory and store some files there. We encrypt these files and push the zipped up files to <strong>transfer.sh</strong>.</p>
<p>Let's set up the INPUTS for our example</p>
<div class="codehilite"><pre><span></span>mkdir -p EXAMPLE
<span class="nb">cd</span> EXAMPLE
mkdir -p KEYS INPUTS OUTPUTS ZIP
<span class="nb">echo</span> <span class="s2">&quot;Hello world&quot;</span> &gt; INPUTS/f1.txt
<span class="nb">echo</span> <span class="s2">&quot;Hello together&quot;</span> &gt; INPUTS/f2.txt
cp ../copy_dapp.yml KEYS/
</pre></div>

<h3 id="step-1">Step 1<a class="headerlink" href="#step-1" title="Permanent link">&para;</a></h3>
<p>Let's execute the first step of encrypting the files and pushing these to the transfer service:</p>
<div class="codehilite"><pre><span></span><span class="nv">CMD</span><span class="o">=</span><span class="k">$(</span>docker run -t --rm -v <span class="nv">$PWD</span>/KEYS:/conf -v <span class="nv">$PWD</span>/INPUTS:/inputs sconecuratedimages/iexecsgx:scone.cli encryptedpush --application sconecuratedimages/iexec:copy_demo -t /conf/copy_dapp.yml<span class="k">)</span>
</pre></div>

<p>Let's look at the output:</p>
<div class="codehilite"><pre><span></span><span class="nb">echo</span> <span class="nv">$CMD</span>
</pre></div>

<p>should result in an output like:</p>
<div class="codehilite"><pre><span></span> <span class="s2">&quot;cmdline&quot;</span>: --sessionID <span class="m">180713033312847980809017601</span>/application --secretManagementService <span class="m">87</span>.190.236.136 --url https://transfer.sh/TPGzU/scone-upload
</pre></div>

<p>You can look in your browser at the URL to see the uploaded files!</p>
<h3 id="step-2">Step 2<a class="headerlink" href="#step-2" title="Permanent link">&para;</a></h3>
<p>Before running this application on the iExec platform, we might
want to test it on some SGX-capable host.</p>
<p>Ensure that the newest image is loaded on <strong>host</strong>. This step is only needed if it is expected that the image has changed
since <strong>docker run</strong> does not pull/update the image.</p>
<div class="codehilite"><pre><span></span>ssh <span class="nv">$host</span> docker pull sconecuratedimages/iexec:copy_demo
</pre></div>

<p>Ensure that you are executing a bash shell (execute <code class="codehilite">bash</code>). Now, execute the command on <strong>host</strong> and we ask it to be pushed to transfer.sh:</p>
<div class="codehilite"><pre><span></span><span class="nv">URL</span><span class="o">=</span><span class="k">$(</span>ssh <span class="nv">$host</span> docker run -t --device<span class="o">=</span>/dev/isgx --rm sconecuratedimages/iexec:copy_demo <span class="si">${</span><span class="nv">CMD</span><span class="p">//[</span><span class="s1">$&#39;\t\r\n&#39;</span><span class="p">]</span><span class="si">}</span> --push transfer.sh<span class="k">)</span>
</pre></div>

<p>Let's look at the output:</p>
<div class="codehilite"><pre><span></span><span class="nb">echo</span> <span class="nv">$URL</span>
</pre></div>

<p>this results in an output like:</p>
<div class="codehilite"><pre><span></span>https://transfer.sh/11yj8M/helloWorld.txt
</pre></div>

<p>You can now download this (if running a <strong>bash</strong> shell) </p>
<div class="codehilite"><pre><span></span>curl --output ZIP/encryptedOutputFiles.zip <span class="si">${</span><span class="nv">URL</span><span class="p">//[</span><span class="s1">$&#39;\t\r\n&#39;</span><span class="p">]</span><span class="si">}</span>
</pre></div>

<h3 id="step-3">Step 3<a class="headerlink" href="#step-3" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span>docker run -t --rm -v <span class="nv">$PWD</span>/KEYS:/conf -v <span class="nv">$PWD</span>/ZIP:/encryptedOutputs  -v  <span class="nv">$PWD</span>/OUTPUTS:/decryptedOutputs sconecuratedimages/iexecsgx:scone.cli decrypt
</pre></div>

<p>We can now look at the files in OUTPUT directory:</p>
<div class="codehilite"><pre><span></span>cat OUTPUTS/f1.txt
</pre></div>

<p>results in  <code class="codehilite">Hello world</code> and</p>
<div class="codehilite"><pre><span></span>cat OUTPUTS/f2.txt
</pre></div>

<p>results in  <code class="codehilite">Hello together</code>.</p>
<p>&copy; <a href="http://www.scontain.com">scontain.com</a>, October 2018. <a href="mailto:info@scontain.com">Questions or Suggestions?</a></p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../memory_dump/" title="Finding Secrets" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Finding Secrets
              </span>
            </div>
          </a>
        
        
          <a href="../usecases/" title="Introduction" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Introduction
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.5e60981f.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
    
      
    
  </body>
</html>